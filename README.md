# Test app with cart and orders

* Додаток було створено в якості кодової бази для демонстрації проектування вузлів у системі, радше ніж повністю робочий код.

## Опис:

1. Завдання було сприйнято як бажання поглянути на загальний, системний аналіз частини функціоналу, щоб отримати одночасно
   розуміння і про технічні навички, і про бізнес-аналітичні. Структура проекту - дефолтний DRF API формат, де сутності 
   розташовані в своїх apps, з розділенням логіки на models, services, serializers, views та urls. Із задоволенням обговорю
   особливості реалізації додатку.
2. З фонових завдань було додано задачу для відправлення ємейлів зі статусом ордера.
3. Базовий сценарій використання АРІ є наступним:
    1. Створити корзину, додавши до неї продукт, або як зареєстрований користувач, або як анонімний 
       (/api/v1/carts/cart-items/remove_product/). 
       - За бажанням видалити продукти (/api/v1/carts/cart-items/remove_product/),
       або змінити їхню кількість у корзині (/api/v1/carts/cart-items/update_quantity/), або очистити корзину цілком 
       (/api/v1/carts/clear_cart/). Переглянути корзину можна за ендпоінтом /api/v1/carts/cart-items/.
       - При потребні корзина незареєстрованого юзера, після входу у систему 
       (/api/v1/token/) мерджиться з корзиною профілю (/api/v1/carts/merge_cart/).
    2. Далі на ендпоінт (/api/v1/orders/{id}/checkout/) відправити запит для створення ордеру, а також, наприклад, 
       для його оплати через систему Square. У відповідь сервер надішле створене посилання на оплату ордера
       через власну форму. Після редиректу юзера і успішну оплату сервер очікуватиме від системи Square повідомлення про
       успішність або неуспішність оплати на вебхук (/api/v1/orders/{id}/checkout/). Після чого статус ордера буде змінено
       на одне з двох (Paid or Failed), а також буде відправлено ємейл про оновлення статусу замовлення.
    3. В якості альтернативи оплати було додано основу для варіанту "Оплати по прибуттю" (Cash on Delivery), що дозволить користувачам 
       не оплачувати товар, поки вони не переконаються у його стані або якості.
    4. Відповідно змінювати статус замовлення зі сторони когось з адміністрації можливо за допомогою ендпоінту 
       /api/v1/orders/{id}/change-status/.
    5. Відслідковувати статус замовлення клієнт може за ендпоінтом /api/v1/orders/{id}/track-status/
    

### Запуск сервера (currently untested):
    docker-compose up

## API Documentation

1.   [Swagger](http://localhost:8000/api/v1/docs/) /api/v1/docs/
2.   [Admin panel](http://localhost:8000/admin/) /admin/
